"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{1035:function(e,r,t){t.d(r,{Yt:function(){return p},CC:function(){return f}});var n=t(9499),o=t(29),i=t(7794),c=t.n(i),s=t(5321),a=t(2114);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var l=function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.PL)((0,s.hJ)(a.DB,"geolocation"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return l().then((function(e){var r=[];return e.forEach((function(e){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({id:e.id},e.data());r.push(t)})),r}))},f=function(){var e=(0,o.Z)(c().mark((function e(r,t){var n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.user)&&void 0!==n&&n.uid){e.next=2;break}return e.abrupt("return",null);case 2:return o={coords:{accuracy:r.coords.accuracy,altitude:r.coords.altitude,altitudeAccuracy:r.coords.altitudeAccuracy,heading:r.coords.heading,latitude:r.coords.latitude,longitude:r.coords.longitude,speed:r.coords.speed},timestamp:r.timestamp,allowLocation:!0},e.next=5,(0,s.pl)((0,s.JU)(a.DB,"geolocation",t.user.uid),{geolocationCoords:o,user:t.user});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},4106:function(e,r,t){var n=(0,t(3274).Z)({palette:{mode:"light",primary:{main:"#264f9e"},secondary:{main:"#455fb4"},background:{paper:"#2d56a5"}}});r.Z=n},7932:function(e,r,t){t.d(r,{Z:function(){return M}});var n=t(1927),o=t(155),i=t(7948),c=t(7357),s=t(6720),a=t(7294),u=t(5438),l=t(891),p=t(796),f=t(9953),d=t(3946),h=t(1519),j=t(8462),g=t(9572),x=t(1098),b=t(9499),O=t(1496),v=t(7533);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,b.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=(0,O.ZP)(v.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var r=e.theme,t=e.open;return{"& .MuiDrawer-paper":w({position:"relative",whiteSpace:"nowrap",width:240,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.enteringScreen}),boxSizing:"border-box"},!t&&(0,b.Z)({overflowX:"hidden",transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),width:r.spacing(7)},r.breakpoints.up("sm"),{width:r.spacing(9)}))}})),Z=t(5893),P=(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)(u.Z,{inset:!0,sx:{color:"white"},children:"Saved reports"}),(0,Z.jsxs)(l.ZP,{button:!0,children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsx)(x.Z,{sx:{color:"white"}})}),(0,Z.jsx)(f.Z,{primary:"Current month",sx:{color:"white"}})]})]}),D=function(e){var r=e.toggleDrawer,t=e.open;return(0,Z.jsxs)(m,{variant:"permanent",open:t,children:[(0,Z.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,Z.jsx)(d.Z,{onClick:r,children:(0,Z.jsx)(g.Z,{})})}),(0,Z.jsx)(h.Z,{}),(0,Z.jsx)(j.Z,{children:P})]})},C=t(5861),k=t(6893),S=t(9661),E=t(326),L=t(2293);function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var A=(0,O.ZP)(L.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var r=e.theme,t=e.open;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){(0,b.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({zIndex:r.zIndex.drawer+1,transition:r.transitions.create(["width","margin"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen})},t&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:r.transitions.create(["width","margin"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.enteringScreen})})})),F=t(7058),U=t(6863),I=t(1057),R=function(){var e=(0,F.$)().i18n,r=function(r){return e.changeLanguage(r.currentTarget.value)};return(0,Z.jsxs)(U.Z,{variant:"contained",children:[(0,Z.jsx)(I.Z,{onClick:r,value:"en",children:"EN"}),(0,Z.jsx)(I.Z,{onClick:r,value:"ua",children:"UA"})]})},G=t(2132),$=t(8530),z=t(8878),T=t(1163),_=function(){var e=(0,T.useRouter)(),r=[{href:"/user/profile",text:(0,(0,F.$)().t)("profile.title")}];return(0,Z.jsxs)(c.Z,{pt:8,children:[(0,Z.jsx)(j.Z,{children:r.map((function(r){return(0,Z.jsxs)(l.ZP,{button:!0,href:r.href,onClick:function(t){return function(r,t){r.preventDefault(),e.push(t)}(t,r.href)},children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsx)(z.Z,{sx:{color:"common.white"}})}),(0,Z.jsx)(f.Z,{primary:r.text,sx:{color:"common.white"}})]},r.text)}))}),(0,Z.jsx)(h.Z,{})]})},B=function(e){var r=e.open,t=e.toggleUserDrawer,n=(0,$.v0)(),o=(0,T.useRouter)(),i=(0,F.$)().t;return(0,Z.jsx)(v.ZP,{anchor:"right",open:r,onClose:t(!1),children:(0,Z.jsxs)(c.Z,{width:250,height:"100%",role:"presentation",display:"flex",justifyContent:"space-between",flexDirection:"column",onClick:t(!1),onKeyDown:t(!1),children:[(0,Z.jsx)(_,{}),(0,Z.jsx)(c.Z,{p:2,display:"flex",justifyContent:"center",children:(0,Z.jsx)(I.Z,{onClick:function(){return(0,$.w7)(n).then((function(){G.Am.success(i("toastSuccess.logOut")),o.push("/login")})).catch((function(e){return G.Am.error("Error: ".concat(e))}))},variant:"contained",size:"large",children:i("drawer.signOutButtonText")})})]})})},Y=t(1795),J=t(315);function K(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?K(Object(t),!0).forEach((function(r){(0,b.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var q=function(e){var r=e.toggleDrawer,t=e.open,n=(0,F.$)().t,i=(0,Y.a)().user,s=(0,T.useRouter)(),u=(0,a.useState)(!1),l=u[0],p=u[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(A,{position:"absolute",open:t,children:(0,Z.jsxs)(o.Z,{sx:{pr:"24px"},children:[(0,Z.jsx)(d.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:r,sx:W({marginRight:"36px"},t&&{display:"none"}),children:(0,Z.jsx)(E.Z,{})}),(0,Z.jsx)(C.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1,cursor:"pointer"},onClick:function(e){e.preventDefault(),s.push("/")},children:n("dashboard.title")}),(0,Z.jsx)(c.Z,{pr:1,children:(0,Z.jsx)(R,{})}),i&&i.displayName&&i.photoURL&&(0,Z.jsx)(k.Z,{title:"Open settings",children:(0,Z.jsx)(d.Z,{sx:{p:0},onClick:function(){return p((function(e){return!e}))},children:(0,Z.jsx)(S.Z,W({alt:i.displayName,src:i.photoURL},(0,J.GZ)(i.displayName)))})})]})}),(0,Z.jsx)(B,{open:l,toggleUserDrawer:function(e){return function(r){if("keydown"===r.type&&("Tab"===r.key||"Shift"===r.key))return null;p(e)}}})]})},H=t(4106),M=function(e){var r=e.children,t=(0,a.useState)(!1),u=t[0],l=t[1],p=function(){return l(!u)};return(0,Z.jsx)(n.Z,{theme:H.Z,children:(0,Z.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,Z.jsx)(s.ZP,{}),(0,Z.jsx)(q,{open:u,toggleDrawer:p}),(0,Z.jsx)(D,{open:u,toggleDrawer:p}),(0,Z.jsxs)(c.Z,{component:"main",sx:{flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,Z.jsx)(o.Z,{}),(0,Z.jsx)(i.Z,{maxWidth:"xl",sx:{mt:2,mb:2},children:r})]})]})})}},2267:function(e,r,t){var n=t(7294),o=t(2132),i=t(1035),c=t(1795);r.Z=function(){var e,r=(0,n.useState)([]),t=r[0],s=r[1],a=(0,c.a)().user;(0,n.useEffect)((function(){(0,i.Yt)().then((function(e){return s(e)})).catch((function(e){return o.Am.error(e)}))}),[]);var u=t.find((function(e){return e.user.uid===(null===a||void 0===a?void 0:a.uid)}));return{user:u,isLocationAllowed:null!==(e=null===u||void 0===u?void 0:u.geolocationCoords.allowLocation)&&void 0!==e&&e}}},7028:function(e,r,t){t.d(r,{H:function(){return l},K:function(){return p}});var n=t(1163),o=t(7294),i=t(7058),c=t(2132),s=t(1035),a=t(1795),u=t(5893),l=function(e){var r=(0,n.useRouter)(),t=(0,i.$)().t,s=(0,o.useState)(),a=s[0],u=s[1];return(0,o.useEffect)((function(){e&&navigator.geolocation.getCurrentPosition((function(e){u(e),c.Am.success(t("toastSuccess.acceptGeolocation")),r.push("/")}),(function(e){c.Am.error(e.message)}))}),[e,r,t]),a},p=function(e){var r=e.acceptLocation,t=e.children,n=l(r),i=(0,a.a)();return(0,o.useEffect)((function(){n&&(0,s.CC)(n,i)}),[n,i]),(0,u.jsx)(u.Fragment,{children:t})}},315:function(e,r,t){t.d(r,{Tq:function(){return c},GZ:function(){return a},Yd:function(){return u}});var n,o=t(381),i=t.n(o);!function(e){e.OFFLINE="Offline",e.ONLINE="Online"}(n||(n={}));var c=function(e){var r=i()().valueOf(),t=i()(r).diff(i()(e));return+i()(t).format("m")>5?n.OFFLINE:n.ONLINE},s=function(e){var r,t=0;for(r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t);var n="#";for(r=0;r<3;r+=1){n+="00".concat((t>>8*r&255).toString(16)).substr(-2)}return n},a=function(e){return{sx:{bgcolor:s(e)},children:u(e)}},u=function(e){return"".concat(e.split(" ")[0][0].toUpperCase()).concat(e.split(" ")[1][0].toUpperCase())}}}]);