(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8187:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(9008),o=n(6886),i=n(7357),a=n(5861),s=n(6893),c=n(7294),u=n(1102),l=function(e){var t=e.users,n=e.onUserClick;return(0,c.createElement)(u.t,{users:t,onUserClick:n})},d=n(1163),p=n(240),f=n(7932),m=n(6001),h=n(6158),x=n.n(h),v=(n(1634),n(5113)),y=n(5893),g=function(e){var t=e.mapNode;return(0,y.jsx)(v.Z,{sx:{height:600},children:(0,y.jsx)("div",{ref:t,style:{width:"100%",height:"100%"}})})},b=function(e,t){var n=new(x().Popup)({closeButton:!1,closeOnClick:!1});e.popup.addEventListener("mouseenter",(function(){e.popup.style.cursor="pointer",e.marker.properties.description&&n.setLngLat(e.marker.geometry.coordinates).setHTML(e.marker.properties.description).addTo(t)})),e.popup.addEventListener("mouseleave",(function(){e.popup.style.cursor="",n.remove()})),new(x().Marker)(e.popup).setLngLat(e.marker.geometry.coordinates).addTo(t)},j=function(){var e=(0,c.useState)(),t=e[0],n=e[1],r=(0,c.useRef)(null),o=[24.065285,49.8138699];return(0,c.useEffect)((function(){var e=r.current;if(null!==e){var t=new(x().Map)({container:e,accessToken:"pk.eyJ1IjoidHJvbnlhIiwiYSI6ImNpdXNteHUwdzAwMWkyenBmamRlbTk2Zm8ifQ.aFKT4IOHyPCPRt_GNfUYnw",style:"mapbox://styles/tronya/cixa87ptp00g12qo9jjbqm9mk",center:o,zoom:11});n(t)}}),[]),{mapboxMap:t,mapNode:r}};function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.markers,n=e.selectedUser,r=j(),o=r.mapboxMap,i=r.mapNode;return(0,c.useEffect)((function(){if(o)return o.addControl(new(x().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),function(){o.remove()}}),[o]),(0,c.useEffect)((function(){n&&o&&o.flyTo({center:[null===n||void 0===n?void 0:n.coords.longitude,null===n||void 0===n?void 0:n.coords.latitude],essential:!0,zoom:14})}),[o,n]),(0,c.useEffect)((function(){if(null!==t&&void 0!==t&&t.length&&o){var e,n=w(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;b(r,o)}}catch(i){n.e(i)}finally{n.f()}}}),[o,t]),(0,c.createElement)(g,{mapNode:i})},E=n(315),N=function(e){var t=[];return function(e){return e.map((function(e){return{properties:{description:e.displayName,iconSize:[40,40],backgroundImage:e.photoURL,displayName:e.displayName},geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}}}))}(e).forEach((function(e){var n=document.createElement("div"),r=e.properties.iconSize[0],o=e.properties.iconSize[1];n.style.borderRadius="50%",n.style.backgroundRepeat="no-repeat",n.style.backgroundImage=e.properties.backgroundImage?"url(".concat(e.properties.backgroundImage,")"):"url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='30px'><text x='6' y='20' fill='black' font-size='15'>".concat((0,E.Yd)(e.properties.displayName),'</text></svg>")'),n.style.width="".concat(r,"px"),n.style.height="".concat(o,"px"),n.style.backgroundSize="100%",t.push({popup:n,marker:e})})),t},T=n(1057),C=function(e){var t=e.buttonText,n=e.buttonHref,r=e.title,s=(0,d.useRouter)();return(0,y.jsx)(v.Z,{sx:{p:4},children:(0,y.jsxs)(o.ZP,{container:!0,children:[(0,y.jsx)(o.ZP,{item:!0,xs:10,sm:10,lg:10,children:(0,y.jsx)(a.Z,{variant:"h6",sx:{color:"common.white"},children:r})}),t&&n&&(0,y.jsx)(o.ZP,{item:!0,xs:2,sm:2,lg:2,children:(0,y.jsx)(i.Z,{display:"flex",justifyContent:"end",height:1,children:(0,y.jsx)(T.Z,{variant:"contained",sx:{backgroundColor:"white !important",color:"primary.main",textAlign:"center"},onClick:function(e){e.preventDefault(),n&&s.push(n)},href:n,children:t})})})]})})},I=n(7058),_=n(9944),P=n(3936),S=n(6870),A=function(){var e=(0,c.useState)(null),t=e[0],n=e[1],u=(0,d.useRouter)(),h=(0,I.$)().t,x=(0,m.a)(),v=x.user,g=x.loading,b=(0,S.ZA)().isLocationAllowed,j=(0,P.Z)(),w=N(j);if((0,c.useEffect)((function(){g||v||u.push("/login")}),[v,g,u]),!j)return(0,y.jsx)(p.Z,{});return(0,y.jsxs)(f.Z,{children:[(0,y.jsxs)(r.default,{children:[(0,y.jsx)("title",{children:"whereiam"}),(0,y.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,y.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,y.jsx)("main",{children:b?(0,y.jsxs)(o.ZP,{container:!0,children:[(0,y.jsxs)(o.ZP,{item:!0,xs:12,sm:6,lg:3,children:[(0,y.jsxs)(i.Z,{display:"flex",alignItems:"center",py:2,mr:2,children:[(0,y.jsx)(a.Z,{variant:"h4",children:h("dashboard.peopleYouFollow")}),(0,y.jsx)(s.Z,{title:h("dashboard.tooltip"),placement:"top",children:(0,y.jsx)(i.Z,{ml:1,children:(0,y.jsx)(_.Z,{sx:{width:15,height:15}})})})]}),(0,y.jsx)(l,{users:j,onUserClick:function(e){return n(e)}})]}),(0,y.jsx)(o.ZP,{item:!0,xs:12,sm:6,lg:9,children:(0,y.jsx)(Z,{markers:w,selectedUser:t})})]}):(0,y.jsx)(C,{title:h("dashboard.bannerTitle"),buttonText:h("dashboard.bannerButtonText"),buttonHref:"/user/profile"})})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8187)}])}},function(e){e.O(0,[885,634,701,476,906,883,592,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);