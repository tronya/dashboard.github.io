(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1548:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Ze}});var t,o,i=r(9008),s=r(2132),a=r(6886),c=r(7294),u=r(7357),l=r(891),d=r(8987),p=r(9661),f=r(9953),h=r(5861),x=r(1519),j=r(8462),g=r(8078),m=r(5893),y=function(e){for(var n=e.count,r=[],t=0;t<n;t++)r.push(t);return(0,m.jsx)(j.Z,{sx:{width:240},children:r.map((function(e,n){return(0,m.jsxs)(l.ZP,{alignItems:"flex-start",children:[(0,m.jsx)(d.Z,{children:(0,m.jsx)(g.Z,{variant:"circular",width:40,height:40})}),(0,m.jsx)(f.Z,{primary:(0,m.jsx)(g.Z,{variant:"text"}),secondary:(0,m.jsx)(h.Z,{component:"span",variant:"body2",children:(0,m.jsx)(g.Z,{variant:"text"})})})]},n)}))})},v=r(7036),b=r(3486),Z=r(8530),w=r(1383),O=(0,r(8797).ZP)(j.Z)(t||(t=(0,w.Z)(["\n  @media (max-width: 599px) {\n    margin-right: unset;\n  }\n"]))),P=r(381),k=r.n(P);!function(e){e.OFFLINE="Offline",e.ONLINE="Online"}(o||(o={}));var S=function(e){var n=k()().valueOf(),r=k()(n).diff(k()(e));return+k()(r).format("m")>5?o.OFFLINE:o.ONLINE},C=function(e){var n=e.geolocation,r=e.onUserClick,t=(0,Z.v0)().currentUser;if(!n.length)return(0,m.jsx)(y,{count:6});var o=n[n.length-1].user.uid;return(0,m.jsx)(O,{sx:{mr:2,mb:2,bgcolor:"background.paper"},children:n.map((function(e){var n=e.user,i=e.geolocationCoords,s=n.uid===(null===t||void 0===t?void 0:t.uid);return(0,m.jsxs)(u.Z,{onClick:function(){return r(e)},sx:{cursor:"pointer"},children:[(0,m.jsxs)(l.ZP,{alignItems:"flex-start",children:[(0,m.jsx)(d.Z,{children:(0,m.jsx)(p.Z,{alt:n.displayName,src:n.photoURL})}),(0,m.jsx)(f.Z,{sx:{color:v.Z[300]},primary:(0,m.jsxs)(m.Fragment,{children:[n.displayName,(0,m.jsx)(h.Z,{variant:"caption",children:s&&" (It's you)"})]}),secondary:(0,m.jsx)(h.Z,{component:"span",variant:"body2",color:"Online"===S(i.timestamp)?b.Z[400]:v.Z[500],children:S(i.timestamp)})})]}),o!==n.uid&&(0,m.jsx)(x.Z,{variant:"inset",component:"li"})]},n.uid)}))})},E=function(e){var n=e.geolocation,r=e.onUserClick;return(0,c.createElement)(C,{geolocation:n,onUserClick:r})},I=r(1163),D=r(8456),N=r(4106),L=function(){return(0,m.jsx)(u.Z,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",children:(0,m.jsx)(D.Z,{size:100,sx:{color:N.Z.palette.primary.main}})})},U=r(1927),A=r(155),T=r(7948),_=r(6720),z=r(5438),R=r(796),F=r(3946),H=r(9572),M=r(1098),G=r(9499),Y=r(1496),X=r(7533);function W(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function $(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?W(Object(r),!0).forEach((function(n){(0,G.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var B=(0,Y.ZP)(X.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,r=e.open;return{"& .MuiDrawer-paper":$({position:"relative",whiteSpace:"nowrap",width:240,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen}),boxSizing:"border-box"},!r&&(0,G.Z)({overflowX:"hidden",transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),width:n.spacing(7)},n.breakpoints.up("sm"),{width:n.spacing(9)}))}})),J=(0,m.jsxs)(u.Z,{children:[(0,m.jsx)(z.Z,{inset:!0,children:"Saved reports"}),(0,m.jsxs)(l.ZP,{button:!0,children:[(0,m.jsx)(R.Z,{children:(0,m.jsx)(M.Z,{})}),(0,m.jsx)(f.Z,{primary:"Current month"})]})]}),K=function(e){var n=e.toggleDrawer,r=e.open;return(0,m.jsxs)(B,{variant:"permanent",open:r,children:[(0,m.jsx)(A.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,m.jsx)(F.Z,{onClick:n,children:(0,m.jsx)(H.Z,{})})}),(0,m.jsx)(x.Z,{}),(0,m.jsx)(j.Z,{children:J})]})},Q=r(6893),q=r(326),V=r(2293);function ee(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var ne=(0,Y.ZP)(V.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,r=e.open;return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(r),!0).forEach((function(n){(0,G.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({zIndex:n.zIndex.drawer+1,transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})},r&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})})})),re=r(7058),te=r(6863),oe=r(1057),ie=function(){var e=(0,re.$)().i18n,n=function(n){return e.changeLanguage(n.currentTarget.value)};return(0,m.jsxs)(te.Z,{variant:"contained",children:[(0,m.jsx)(oe.Z,{onClick:n,value:"en",children:"EN"}),(0,m.jsx)(oe.Z,{onClick:n,value:"ua",children:"UA"})]})},se=function(e){var n=e.open,r=e.toggleUserDrawer,t=(0,Z.v0)(),o=(0,I.useRouter)(),i=function(){return(0,Z.w7)(t).then((function(){s.Am.success("You successfully log out!"),o.push("/login")})).catch((function(e){return s.Am.error("Error: ".concat(e))}))};return(0,m.jsx)(X.ZP,{anchor:"right",open:n,onClose:r(!1),children:(0,m.jsxs)(u.Z,{width:250,height:"100%",role:"presentation",display:"flex",justifyContent:"space-between",flexDirection:"column",onClick:r(!1),onKeyDown:r(!1),children:[(0,m.jsxs)(u.Z,{pt:2,children:[(0,m.jsx)(j.Z,{children:["Inbox","Starred","Send email","Drafts"].map((function(e){return(0,m.jsxs)(l.ZP,{button:!0,children:[(0,m.jsx)(R.Z,{children:"test 1"}),(0,m.jsx)(f.Z,{primary:e})]},e)}))}),(0,m.jsx)(x.Z,{}),(0,m.jsx)(j.Z,{children:["All mail","Trash","Spam"].map((function(e){return(0,m.jsxs)(l.ZP,{button:!0,children:[(0,m.jsx)(R.Z,{children:"test 2"}),(0,m.jsx)(f.Z,{primary:e})]},e)}))}),(0,m.jsx)(x.Z,{})]}),(0,m.jsx)(u.Z,{p:2,display:"flex",justifyContent:"center",children:(0,m.jsx)(oe.Z,{onClick:i,variant:"contained",size:"large",children:"SIGH OUT"})})]})})},ae=r(1795);function ce(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ue(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(r),!0).forEach((function(n){(0,G.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var le=function(e){var n=e.toggleDrawer,r=e.open,t=(0,re.$)().t,o=(0,ae.a)().user,i=(0,c.useState)(!1),s=i[0],a=i[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ne,{position:"absolute",open:r,children:(0,m.jsxs)(A.Z,{sx:{pr:"24px"},children:[(0,m.jsx)(F.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:n,sx:ue({marginRight:"36px"},r&&{display:"none"}),children:(0,m.jsx)(q.Z,{})}),(0,m.jsx)(h.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:t("dashboard")}),(0,m.jsx)(u.Z,{pr:1,children:(0,m.jsx)(ie,{})}),o&&o.displayName&&o.photoURL&&(0,m.jsx)(Q.Z,{title:"Open settings",children:(0,m.jsx)(F.Z,{sx:{p:0},onClick:function(){return a((function(e){return!e}))},children:(0,m.jsx)(p.Z,{alt:o.displayName,src:o.photoURL})})})]})}),(0,m.jsx)(se,{open:s,toggleUserDrawer:function(e){return function(n){if("keydown"===n.type&&("Tab"===n.key||"Shift"===n.key))return null;a(e)}}})]})},de=function(e){var n=e.children,r=(0,c.useState)(!1),t=r[0],o=r[1],i=function(){return o(!t)};return(0,m.jsx)(U.Z,{theme:N.Z,children:(0,m.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,m.jsx)(_.ZP,{}),(0,m.jsx)(le,{open:t,toggleDrawer:i}),(0,m.jsx)(K,{open:t,toggleDrawer:i}),(0,m.jsxs)(u.Z,{component:"main",sx:{flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,m.jsx)(A.Z,{}),(0,m.jsx)(T.Z,{maxWidth:"xl",sx:{mt:2,mb:2},children:n})]})]})})},pe=r(6158),fe=r.n(pe),he=(r(1634),r(7028)),xe=r(5113),je=function(e){var n=e.mapNode;return(0,m.jsx)(xe.Z,{sx:{height:600},children:(0,m.jsx)("div",{ref:n,style:{width:"100%",height:"100%"}})})};function ge(e,n){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return me(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function me(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var ye=function(e){var n,r,t=e.map,o=e.onSetMap,i=e.markers,s=e.selectedLocation,a=(0,he.H)(),u=(0,c.useRef)(null),l=[null!==(n=null===a||void 0===a?void 0:a.coords.longitude)&&void 0!==n?n:24.065285,null!==(r=null===a||void 0===a?void 0:a.coords.latitude)&&void 0!==r?r:49.8138699];return(0,c.useEffect)((function(){var e=u.current;if(null!==e){var n=new(fe().Map)({container:e,accessToken:"pk.eyJ1IjoidHJvbnlhIiwiYSI6ImNpdXNteHUwdzAwMWkyenBmamRlbTk2Zm8ifQ.aFKT4IOHyPCPRt_GNfUYnw",style:"mapbox://styles/mapbox/streets-v11",center:l,zoom:11});if(null!==i&&void 0!==i&&i.length){var r,t=ge(i);try{for(t.s();!(r=t.n()).done;){var s=r.value;new(fe().Marker)(s.popup).setLngLat(s.marker.geometry.coordinates).addTo(n)}}catch(a){t.e(a)}finally{t.f()}}return n.addControl(new(fe().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),o(n),function(){n.remove()}}}),[]),(0,c.useEffect)((function(){s&&t&&t.flyTo({center:[null===s||void 0===s?void 0:s.geolocationCoords.coords.longitude,null===s||void 0===s?void 0:s.geolocationCoords.coords.latitude],essential:!0,zoom:14})}),[t,s]),(0,c.createElement)(je,{mapNode:u})},ve=r(1035),be=function(e){var n=(0,c.useState)([]),r=n[0],t=n[1],o=[];return(0,c.useEffect)((function(){(0,ve.Yt)().then((function(e){return t(e)})).catch((function(e){return s.Am.error(e)}))}),[]),function(e){return e.map((function(e){return{properties:{description:e.user.displayName,iconSize:[40,40],backgroundImage:e.user.photoURL},geometry:{type:"Point",coordinates:[e.geolocationCoords.coords.longitude,e.geolocationCoords.coords.latitude]}}}))}(r).forEach((function(n){var r=document.createElement("div"),t=n.properties.iconSize[0],i=n.properties.iconSize[1];r.style.borderRadius="50%",r.style.backgroundImage="url(".concat(n.properties.backgroundImage,")"),r.style.width="".concat(t,"px"),r.style.height="".concat(i,"px"),r.style.backgroundSize="100%",r.style.boxShadow="2px 2px 8px rgba(0, 0, 0, 0.5)";var s=new(fe().Popup)({closeButton:!1,closeOnClick:!1});r.addEventListener("mouseenter",(function(){e&&(r.style.cursor="pointer",s.setLngLat(n.geometry.coordinates).setHTML(n.properties.description).addTo(e))})),r.addEventListener("mouseleave",(function(){r.style.cursor="",s.remove()})),o.push({popup:r,marker:n})})),o},Ze=function(){var e=(0,c.useState)(),n=e[0],r=e[1],t=(0,c.useState)([]),o=t[0],u=t[1],l=(0,c.useState)(null),d=l[0],p=l[1],f=(0,I.useRouter)(),h=be(n),x=(0,ae.a)(),j=x.user,g=x.loading;if((0,c.useEffect)((function(){(0,ve.Yt)().then((function(e){return u(e)})).catch((function(e){return s.Am.error(e)}))}),[]),(0,c.useEffect)((function(){g||j||f.push("/login")}),[j,g,f]),!j||!o.length)return(0,m.jsx)(L,{});return(0,m.jsxs)(de,{children:[(0,m.jsxs)(i.default,{children:[(0,m.jsx)("title",{children:"whereiam"}),(0,m.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,m.jsx)("main",{children:(0,m.jsxs)(a.ZP,{container:!0,children:[(0,m.jsx)(a.ZP,{item:!0,xs:12,sm:6,lg:3,children:(0,m.jsx)(E,{geolocation:o,onUserClick:function(e){return p(e)}})}),(0,m.jsx)(a.ZP,{item:!0,xs:12,sm:6,lg:9,children:(0,m.jsx)(ye,{markers:h,map:n,onSetMap:r,selectedLocation:d})})]})})]})}},4106:function(e,n,r){"use strict";var t=(0,r(3274).Z)({palette:{mode:"light",primary:{main:"#264f9e"},secondary:{main:"#455fb4"},background:{paper:"#2d56a5"}}});n.Z=t},5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1548)}])}},function(e){e.O(0,[885,634,170,194,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);