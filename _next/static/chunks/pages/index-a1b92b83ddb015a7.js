(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1391:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(9008),o=n(7357),i=n(1163),c=n(7294),s=n(240),a=n(8332),u=n(6001),l=n(2442),p=n(3580),f=n(5113),d=n(6886),h=n(5861),x=n(1057),g=n(5893),v=function(e){var t=e.buttonText,n=e.buttonHref,r=e.title,c=(0,i.useRouter)();return(0,g.jsx)(f.Z,{sx:{p:4},children:(0,g.jsxs)(d.ZP,{container:!0,children:[(0,g.jsx)(d.ZP,{item:!0,xs:10,sm:10,lg:10,children:(0,g.jsx)(h.Z,{variant:"h6",sx:{color:"common.white"},children:r})}),t&&n&&(0,g.jsx)(d.ZP,{item:!0,xs:2,sm:2,lg:2,children:(0,g.jsx)(o.Z,{display:"flex",justifyContent:"end",height:1,children:(0,g.jsx)(x.Z,{variant:"contained",sx:{backgroundColor:"white !important",color:"primary.main",textAlign:"center"},onClick:function(e){e.preventDefault(),n&&c.push(n)},href:n,children:t})})})]})})},j=n(7058),m=n(3936),y=n(6870),b=n(2297),w=n(9274),O=function(){var e=(0,c.useState)(null),t=e[0],n=e[1],f=(0,i.useRouter)(),d=(0,j.$)().t,h=(0,u.a)(),x=h.user,O=h.loading,Z=(0,y.ZA)().isLocationAllowed,P=(0,m.Z)(),k=(0,p.Z)(P);if((0,c.useEffect)((function(){O||x||f.push("/login")}),[x,O,f]),!P)return(0,g.jsx)(s.Z,{});return(0,g.jsxs)(a.Z,{children:[(0,g.jsxs)(r.default,{children:[(0,g.jsx)("title",{children:"whereiam"}),(0,g.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,g.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,g.jsx)("main",{children:Z?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(w.Z,{title:d("dashboard.users")}),(0,g.jsx)(o.Z,{display:"flex",p:1,children:(0,g.jsx)(b.Z,{users:P,onUserClick:function(e){return n(e)}})}),(0,g.jsx)(l.Z,{markers:k,selectedUser:t})]}):(0,g.jsx)(v,{title:d("dashboard.bannerTitle"),buttonText:d("dashboard.bannerButtonText"),buttonHref:"/user/profile"})})]})}},2442:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(6158),o=n.n(r),i=(n(1634),n(7294)),c=n(5113),s=n(5893),a=function(e){var t=e.mapNode;return(0,s.jsx)(c.Z,{sx:{height:"calc(100vh - 155px)"},children:(0,s.jsx)("div",{ref:t,style:{width:"100%",height:"100%"}})})},u=n(1527),l=function(){var e=(0,i.useState)(),t=e[0],n=e[1],r=(0,i.useRef)(null),c=[24.065285,49.8138699];return(0,i.useEffect)((function(){var e=r.current;if(null!==e){var t=new(o().Map)({container:e,accessToken:"pk.eyJ1IjoidHJvbnlhIiwiYSI6ImNpdXNteHUwdzAwMWkyenBmamRlbTk2Zm8ifQ.aFKT4IOHyPCPRt_GNfUYnw",style:"mapbox://styles/tronya/cixa87ptp00g12qo9jjbqm9mk",center:c,zoom:11});n(t)}}),[]),{mapboxMap:t,mapNode:r}};function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.markers,n=e.selectedUser,r=l(),c=r.mapboxMap,s=r.mapNode;return(0,i.useEffect)((function(){if(c)return c.addControl(new(o().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),function(){c.remove()}}),[c]),(0,i.useEffect)((function(){n&&c&&c.flyTo({center:[null===n||void 0===n?void 0:n.coords.longitude,null===n||void 0===n?void 0:n.coords.latitude],essential:!0,zoom:14})}),[c,n]),(0,i.useEffect)((function(){if(null!==t&&void 0!==t&&t.length&&c){var e,n=p(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;(0,u.R)(r,c)}}catch(o){n.e(o)}finally{n.f()}}}),[c,t]),(0,i.createElement)(a,{mapNode:s})}},2763:function(e,t,n){"use strict";n.d(t,{CK:function(){return d},xu:function(){return h},j8:function(){return x},PJ:function(){return g}});var r,o,i=n(1383),c=n(8462),s=n(7357),a=n(1496),u=n(3851),l=n(1107),p=n(5137),f=n(8797),d=(0,f.ZP)(c.Z)(r||(r=(0,i.Z)(["\n  @media (max-width: 599px) {\n    margin-right: unset;\n  }\n"]))),h=(0,f.ZP)(s.Z)(o||(o=(0,i.Z)(["\n  &:hover {\n    li {\n      svg {\n        color: ",";\n      }\n    }\n  }\n"])),p.Z[500]),x=(0,a.ZP)(u.Z)((function(){return{"& .MuiBadge-badge":{bottom:"10%",right:"23%","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),g=(0,a.ZP)(l.Z)((function(){return{"& .MuiAvatarGroup-avatar":{height:50,width:50}}}))},2297:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3984),o=n(7952),i=n(8459),c=n(7294),s=function(){var e=(0,c.useState)(window.innerWidth),t=e[0],n=e[1],r=(0,c.useState)(i.T.INITIAL),o=r[0],s=r[1];return(0,c.useEffect)((function(){var e=function(){n(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,c.useEffect)((function(){s(t>1300?i.T.DESKTOP:t<=1300&&t>800?i.T.TABLET:i.T.MOBILE)}),[t]),{screenType:o,windowWidth:t}},a=n(315),u=n(2763),l=n(1107),p=n(8078),f=n(5893),d=function(e){for(var t=e.count,n=[],r=0;r<t;r++)n.push(r);return(0,f.jsx)(l.Z,{max:t,total:t,children:n.map((function(e){return(0,f.jsx)(u.j8,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,f.jsx)(p.Z,{variant:"circular",width:50,height:50})},e)}))})},h=function(e){var t=e.users,n=e.onUserClick,c=s().screenType;if(!t.length)return(0,f.jsx)(d,{count:5});var l=c===i.T.DESKTOP?10:c===i.T.TABLET?7:4;return(0,f.jsx)(u.PJ,{max:l,total:t.length,children:t.map((function(e){return(0,f.jsx)(u.j8,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",onClick:function(){return n(e)},sx:{cursor:"pointer"},color:"Online"===(0,a.Tq)(e.timestamp)?"success":"error",children:(0,f.jsx)(r.Z,{title:e.displayName,placement:"bottom",arrow:!0,children:(0,f.jsx)(o.Z,{alt:e.displayName,src:e.photoURL,sx:{width:50,height:50}})})},e.uid)}))})}},9274:function(e,t,n){"use strict";var r=n(5861),o=n(5893);t.Z=function(e){var t=e.title;return(0,o.jsx)(r.Z,{variant:"h3",component:"div",children:t})}},8332:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}});var r=n(1927),o=n(155),i=n(7948),c=n(7357),s=n(6720),a=n(7294),u=n(7212),l=n(796),p=n(9953),f=n(3946),d=n(1519),h=n(8462),x=n(9572),g=n(1098),v=n(9499),j=n(1496),m=n(7533),y=n(8459);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,j.ZP)(m.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return{"& .MuiDrawer-paper":w({position:"relative",whiteSpace:"nowrap",width:y.p,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!n&&(0,v.Z)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),Z=n(7058),P=n(1664),k=n(5893),E=function(){var e=(0,Z.$)().t;return(0,k.jsx)(c.Z,{children:(0,k.jsx)(P.default,{href:"/groups",passHref:!0,children:(0,k.jsxs)(u.ZP,{button:!0,children:[(0,k.jsx)(l.Z,{children:(0,k.jsx)(g.Z,{sx:{color:"white"}})}),(0,k.jsx)(p.Z,{primary:e("mainMenu.groups"),sx:{color:"white"}})]})})})},T=function(e){var t=e.toggleDrawer,n=e.open;return(0,k.jsxs)(O,{variant:"permanent",open:n,children:[(0,k.jsx)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,k.jsx)(f.Z,{onClick:t,children:(0,k.jsx)(x.Z,{})})}),(0,k.jsx)(d.Z,{}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(E,{})})]})},S=n(5861),D=n(3984),C=n(7952),I=n(326),L=n(2293);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A=(0,j.ZP)(L.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:y.p,width:"calc(100% - ".concat(y.p,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),U=n(6863),R=n(1057),z=function(){var e=(0,Z.$)().i18n,t=function(t){return e.changeLanguage(t.currentTarget.value)};return(0,k.jsxs)(U.Z,{variant:"contained",children:[(0,k.jsx)(R.Z,{onClick:t,value:"en",children:"EN"}),(0,k.jsx)(R.Z,{onClick:t,value:"ua",children:"UA"})]})},M=n(2132),_=n(8530),B=n(8878),H=n(1163),F=function(){var e=(0,H.useRouter)(),t=(0,Z.$)().t,n=[{href:"/user/profile",text:t("profile.title")},{href:"/user/favorites",text:t("favorites.title")}];return(0,k.jsxs)(c.Z,{pt:8,children:[(0,k.jsx)(h.Z,{children:n.map((function(t){return(0,k.jsxs)(u.ZP,{button:!0,href:t.href,onClick:function(n){return function(t,n){t.preventDefault(),e.push(n)}(n,t.href)},children:[(0,k.jsx)(l.Z,{children:(0,k.jsx)(B.Z,{sx:{color:"common.white"}})}),(0,k.jsx)(p.Z,{primary:t.text,sx:{color:"common.white"}})]},t.text)}))}),(0,k.jsx)(d.Z,{})]})},G=function(e){var t=e.open,n=e.toggleUserDrawer,r=(0,_.v0)(),o=(0,H.useRouter)(),i=(0,Z.$)().t;return(0,k.jsx)(m.ZP,{anchor:"right",open:t,onClose:n(!1),children:(0,k.jsxs)(c.Z,{width:250,height:"100%",role:"presentation",display:"flex",justifyContent:"space-between",flexDirection:"column",onClick:n(!1),onKeyDown:n(!1),children:[(0,k.jsx)(F,{}),(0,k.jsx)(c.Z,{p:2,display:"flex",justifyContent:"center",children:(0,k.jsx)(R.Z,{onClick:function(){return(0,_.w7)(r).then((function(){M.Am.success(i("toastSuccess.logOut")),o.push("/login")})).catch((function(e){return M.Am.error("Error: ".concat(e))}))},variant:"contained",size:"large",children:i("drawer.signOutButtonText")})})]})})},K=n(6001),$=n(315);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=function(e){var t=e.toggleDrawer,n=e.open,r=(0,Z.$)().t,i=(0,K.a)().user,s=(0,H.useRouter)(),u=(0,a.useState)(!1),l=u[0],p=u[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(A,{position:"absolute",open:n,children:(0,k.jsxs)(o.Z,{sx:{pr:"24px"},children:[(0,k.jsx)(f.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t,sx:q({marginRight:"36px"},n&&{display:"none"}),children:(0,k.jsx)(I.Z,{})}),(0,k.jsx)(S.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1,cursor:"pointer"},onClick:function(e){e.preventDefault(),s.push("/")},children:r("dashboard.title")}),(0,k.jsx)(c.Z,{pr:1,children:(0,k.jsx)(z,{})}),i&&i.displayName&&i.photoURL&&(0,k.jsx)(D.Z,{title:"Open settings",children:(0,k.jsx)(f.Z,{sx:{p:0},onClick:function(){return p((function(e){return!e}))},children:(0,k.jsx)(C.Z,q({alt:i.displayName,src:i.photoURL},(0,$.GZ)(i.displayName)))})})]})}),(0,k.jsx)(G,{open:l,toggleUserDrawer:function(e){return function(t){if("keydown"===t.type&&("Tab"===t.key||"Shift"===t.key))return null;p(e)}}})]})},X=n(4106),Y=function(e){var t=e.children,n=(0,a.useState)(!1),u=n[0],l=n[1],p=function(){return l(!u)};return(0,k.jsx)(r.Z,{theme:X.Z,children:(0,k.jsxs)(c.Z,{sx:{display:"flex"},children:[(0,k.jsx)(s.ZP,{}),(0,k.jsx)(J,{open:u,toggleDrawer:p}),(0,k.jsx)(T,{open:u,toggleDrawer:p}),(0,k.jsxs)(c.Z,{component:"main",sx:{flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,k.jsx)(o.Z,{}),(0,k.jsx)(i.Z,{maxWidth:"xl",sx:{mt:2,mb:2},children:t})]})]})})}},8459:function(e,t,n){"use strict";n.d(t,{p:function(){return o},T:function(){return r}});var r,o=240;!function(e){e.DESKTOP="DESKTOP",e.TABLET="TABLET",e.MOBILE="MOBILE",e.INITIAL="INITIAL"}(r||(r={}))},3936:function(e,t,n){"use strict";var r=n(9499),o=n(6835),i=n(6256),c=n(7294),s=n(2114);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.Z=function(){var e=(0,c.useState)([]),t=e[0],n=e[1];return(0,c.useEffect)((function(){(0,i.jM)((0,i.iH)(s.UO,"usersGeolocation"),(function(e){var t,i=null===(t=Object.entries(e.val()))||void 0===t?void 0:t.map((function(e){var t=(0,o.Z)(e,2);t[0];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t[1])}));n(i)}))}),[]),t}},3580:function(e,t,n){"use strict";var r=n(1527),o=n(315);t.Z=function(e){var t=[];return(0,r.c)(e).forEach((function(e){var n=document.createElement("div"),r=e.properties.iconSize[0],i=e.properties.iconSize[1];n.style.borderRadius="50%",n.style.backgroundRepeat="no-repeat",n.style.backgroundImage=e.properties.backgroundImage?"url(".concat(e.properties.backgroundImage,")"):"url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='30px' width='30px'><text x='6' y='20' fill='black' font-size='15'>".concat((0,o.Yd)(e.properties.displayName),'</text></svg>")'),n.style.width="".concat(r,"px"),n.style.height="".concat(i,"px"),n.style.backgroundSize="100%",t.push({popup:n,marker:e})})),t}},1527:function(e,t,n){"use strict";n.d(t,{c:function(){return i},R:function(){return c}});var r=n(6158),o=n.n(r),i=function(e){return e.map((function(e){return{properties:{description:e.displayName,iconSize:[40,40],backgroundImage:e.photoURL,displayName:e.displayName},geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}}}))},c=function(e,t){var n=new(o().Popup)({closeButton:!1,closeOnClick:!1});e.popup.addEventListener("mouseenter",(function(){e.popup.style.cursor="pointer",e.marker.properties.description&&n.setLngLat(e.marker.geometry.coordinates).setHTML(e.marker.properties.description).addTo(t)})),e.popup.addEventListener("mouseleave",(function(){e.popup.style.cursor="",n.remove()})),new(o().Marker)(e.popup).setLngLat(e.marker.geometry.coordinates).addTo(t)}},315:function(e,t,n){"use strict";n.d(t,{Tq:function(){return c},GZ:function(){return a},Yd:function(){return u}});var r,o=n(381),i=n.n(o);!function(e){e.OFFLINE="Offline",e.ONLINE="Online"}(r||(r={}));var c=function(e){var t=i()().valueOf(),n=i()(t).diff(i()(e));return+i()(n).format("m")>2?r.OFFLINE:r.ONLINE},s=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r},a=function(e){return{sx:{bgcolor:s(e)},children:u(e)}},u=function(e){return"".concat(null===e||void 0===e?void 0:e.split(" ")[0][0].toUpperCase()).concat(null===e||void 0===e?void 0:e.split(" ")[1][0].toUpperCase())}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1391)}])}},function(e){e.O(0,[885,634,701,953,481,913,217,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);